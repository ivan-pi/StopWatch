.TH OPTION_STOPWATCH 3 "January 3, 1997" "StopWatch 1.0" "STOPWATCH PROCEDURES"
.PD 0.0v


.SH NAME
option_stopwatch - sets StopWatch options

.SH SYNOPSIS
subroutine
.BI "option_stopwatch" "(default_clock, io_unit_print, io_unit_error, print_errors, abort_errors, print_form, err)"


.IP
character(len=*), optional, intent(IN) ::
default_clock(:)
.IP OR
character(len=*), optional, intent(IN) ::  default_clock


.IP
integer, optional, intent(IN) ::  io_unit_print,
io_unit_err
.IP
logical, optional, intent(IN) ::  print_errors,
abort_errors
.IP
character(len=*), optional, intent(IN) ::  print_form
.IP
integer, optional, intent(OUT) ::  err


.SH DESCRIPTION
Sets options that control the behavior of StopWatch.
All arguments are optional and have intent IN (except
the status code
.I err
which has intent OUT). These options are global in
nature, and remain in effect until another call to
.B option_stopwatch
changes them.
The argument
.I default_clock
determines what clocks will be used for all subsequent
operations in which the
.I clock
argument is omitted.  This allows you to specify what
clocks you are interested in once and for all, and not
have to specify those clocks with every subroutine
call.  The initial default value is (/'cpu ', 'user',
\'sys ', 'wall'/), i.e., all clocks.  However, if any
clocks are not available in the implementation, they
will be automatically removed from the list of default
clocks.

Printed output can be redirected to any valid I/O unit
number.
.I io_unit_print
determines the unit for output from subroutine
.BI "print_watch." " io_unit_error"
determines the unit for any error messages printed by
StopWatch.  When an I/O unit is reset by one of these
variables, the unit must already be open for writing.
The initial default is 6 for both I/O units, which is
standard output on many systems.

What to do when an error occurs is controlled by the
two logical variables
.I print_errors
and
.I abort_errors.
If
.I print_errors
is TRUE, then an error message will be printed to
.I io_unit_error
whenever an error condition occurs.  In all cases where
an error can be detected, the program can continue to
execute, although the behavior of StopWatch might not
be as expected.  If
.I abort_errors
is TRUE, then the program will terminate when an error
condition occurs.  The initial defaults are TRUE for
.I print_errors
and FALSE for
.I abort_errors.


The argument
.I print_form
determines the form for printing time when
.I form
is omitted in
.I print_errors
.  The valid values are:    .IP 'sec',
seconds
.IP 'hh:mm:ss',
colon separated hours, minutes and seconds
.IP '[[hh:]mm:]ss',
same as 'hh:mm:ss' except hours and minutes are printed
only if nonzero
The default value is 'sec'.

.SH DIAGNOSTICS
If present, the optional intent OUT integer argument
.I err
returns a status code.  The code is the sum of the
values listed below.

The relevant status codes and messages are:


.IP 0
No errors; execution successful.


.IP 8
Invalid clock type.  This occurs if
.I default_clock
is present and one of the specified clocks is not
supported by the implementation.  See
.BR "inquiry_stopwatch" "(3)"
to determine what clocks are available.


.IP 16
Too many clocks specified.  This occurs when the
argument
.I default_clock
is an array longer than four.


.IP 256
I/O unit is not open for writing.  The I/O unit
requested for
.I io_unit_print
or
.I io_unit_error
is not open for writing.


.IP 512
Failed to allocate required memory.  This error occurs
if the Fortran
.B allocate
statement returns a nonzero status indicating that
memory could not be allocated.  Avoid memory leaks by
always destroying watches and groups before recreating
them, and destroying local variable watches and groups
before returning from a subroutine.


.IP 1024
Error occurred while deallocating memory.  This error
occurs if the Fortran
.B deallocate
statement returns a nonzero status while deallocating
memory.  Be aware that other problems could develop as
a result of the deallocate error.


.IP 2048
Illegal output form.  This error occurs if
.I print_form
is not one of the strings listed above.


.LP

In addition to the run time diagnostics generated by
StopWatch, the following problems may arise:


.IP o
In Fortran 90, the character strings in an array
constructor must all have the same length.  Pad three
letter clock names with a blank on the right to make a
four character string, for example, 'cpu '.


.SH EXAMPLES
call option_stopwatch(default_clock='cpu',
abort_error=.true.)
.br
call option_stopwatch(io_unit_print=11, io_unit_error=12)

The first call sets the default clock to be the cpu
clock and says to terminate the program if an error
occurs.  The second call reassigns the I/O units.

.SH BUGS
None known.

.SH AUTHOR
William F. Mitchell, william.mitchell@nist.gov
.br
National Institute of Standards and Technology


.SH SEE ALSO
stopwatch(3), create_watchgroup(3), create_watch(3),
destroy_watchgroup(3), destroy_watch(3),
end_pause_watch(3), inquiry_stopwatch(3),
join_watchgroup(3), leave_watchgroup(3), pause_watch(3),
print_watch(3), read_watch(3), reset_watch(3),
start_watch(3), stop_watch(3)
